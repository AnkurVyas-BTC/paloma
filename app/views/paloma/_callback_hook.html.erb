<% id = "#{Time.now.to_i}#{(rand * 1000).ceil}" %>

<div class="paloma-callback-details" data-id="<%= id %>">
  <script type="text/javascript">
  /*
    (function(){

      // Do not continue if Paloma.js is not found.
      if (window['Paloma'] === undefined && window['console'] !== undefined){
        console.warn("Paloma.js not found. Require it in your application.js.");
        return true;
      }

      // Remove any callback details if any
      $('.paloma-callback-details[data-id!=' + <%= id %> + ']').remove();

      var run = function(){
        var callbacks = <%= callbacks.to_json.html_safe %>;

        for (var i = 0, len = callbacks.length; i < len; i++){
          Paloma.execute(callbacks[i]);
        }
      };


      $(document).ready(function(){ run(); });
    })();
  */
  </script>
</div>
